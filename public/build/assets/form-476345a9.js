Alpine.data("form",(l,s,i,r,c,n,d,h,p)=>({totalExistencia:l,totalEntrada:c,totalSalida:r,totalSobrante:0,totalGastos:0,total:0,sumSobrante:0,sumSalida:n,sumEntrada:d,data:s,efectivo:i,entradas:h,saldo:p,searchOnTable(a,t){document.getElementById(t).querySelectorAll("tbody tr").forEach(o=>{const m=Array.from(o.querySelectorAll("td")).map(u=>u.textContent.toLowerCase()).join(" ").includes(a.target.value);o.classList.toggle("d-none",!m)})},copiarExistenciaMarinados(){let a=this.data.filter(t=>t.categoria_id===2);this.marinados=a,console.log(a)},calcularTotal(a,t){return((parseFloat(a)||0)*(parseFloat(t)||0)).toFixed(2)},sumaTotalExistencia(){this.totalExistencia=this.data.map(a=>parseFloat(a.importe_existencia)||0).reduce((a,t)=>a+(parseFloat(t)||0),0)},sumaTotalEntrada(){this.totalEntrada=this.data.map(a=>parseFloat(a.importe_entrada)||0).reduce((a,t)=>a+(parseFloat(t)||0),0)},sumaTotalSalida(){let a=this.data.map(t=>parseFloat(t.importe_salida)||0).reduce((t,e)=>t+(parseFloat(e)||0),0);this.sumSalida=this.totalSalida+a},setTotalEntrada(a,t){a.importe_entrada=this.calcularTotal(a.precio,t),this.sumaTotalEntrada()},setTotalSalida(a,t){a.importe_salida=this.calcularTotal(a.precio,t),this.sumaTotalSalida()},setTotalExistencia(a,t){a.importe_existencia=this.calcularTotal(t,a.cantidad_existencia),this.sumaTotalExistencia()},calcularTotal(){return parseFloat(this.efectivo)+parseFloat(this.$wire.efectivoMarinado)-(parseFloat(this.totalEntrada)+parseFloat(this.totalExistencia)-parseFloat(this.totalSalida)-parseFloat(this.totalSobrante)-parseFloat(this.totalGastos))}}));
